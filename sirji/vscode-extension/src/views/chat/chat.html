<!DOCTYPE html>
<html lang="en">

<head>
  <title>Sirji Chat</title>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- Use a meta tag to enforce Content Security Policy -->
  <meta http-equiv="Content-Security-Policy"
    content="default-src 'none'; style-src-elem  'nonce-${nonce}'; script-src 'nonce-${nonce}';" />
  <link nonce="${nonce}" rel="stylesheet" type="text/css" href="${chatStyleUri}" />
</head>

<body>
  <main>
    <div class="column-view" id="jWrap">
      <!--  chat terminal  -->
      <div class="chat-termianl-container" id="jLeft">
        <!-- header -->
        <div class="header" id="jHeader">
          <div class="left">
            <div class="chat-tab-button">CHAT</div>
          </div>
          <div class="right">
            <div class="tokensContainer toolbar-icon" id="jTokensContainer">
              <svg width="22" height="6" viewBox="0 0 22 6" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd"
                  d="M1 0C0.447715 0 0 0.447715 0 1V5C0 5.55228 0.447715 6 1 6H6H11H21C21.5523 6 22 5.55228 22 5V1C22 0.447715 21.5523 0 21 0H11H6H1ZM5 1H2H1V2V4V5H2H5V1ZM6 5H7H10H11V4V2V1H10H7H6V2V4V5ZM12 1V5H20H21V4V2V1H20H12Z"
                  fill="white" />
              </svg>
              <div class="tokens text" id="jTokensUsed">0 tokens</div>
              <div class="tooltip">
                <div class="tooltip-body">
                  <div class="tooltip-text" id="jPromptTokensUsed">Prompt Tokens - 0 | $0</div>
                  <div class="hr"></div>
                  <div class="tooltip-text" id="jCompletionTokensUsed">Completion Tokens - 0 | $0</div>
                </div>
                <div class="tooltip-arrow"></div>
              </div>
            </div>
            <div id="openSettings" class="toolbar-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 256 256">
                <path
                  d="M128 80a48 48 0 1 0 48 48 48.05 48.05 0 0 0-48-48m0 80a32 32 0 1 1 32-32 32 32 0 0 1-32 32m88-29.84q.06-2.16 0-4.32l14.92-18.64a8 8 0 0 0 1.48-7.06 107.2 107.2 0 0 0-10.88-26.25 8 8 0 0 0-6-3.93l-23.72-2.64q-1.48-1.56-3-3L186 40.54a8 8 0 0 0-3.94-6 107.7 107.7 0 0 0-26.25-10.87 8 8 0 0 0-7.06 1.49L130.16 40h-4.32L107.2 25.11a8 8 0 0 0-7.06-1.48 107.6 107.6 0 0 0-26.25 10.88 8 8 0 0 0-3.93 6l-2.64 23.76q-1.56 1.49-3 3L40.54 70a8 8 0 0 0-6 3.94 107.7 107.7 0 0 0-10.87 26.25 8 8 0 0 0 1.49 7.06L40 125.84v4.32L25.11 148.8a8 8 0 0 0-1.48 7.06 107.2 107.2 0 0 0 10.88 26.25 8 8 0 0 0 6 3.93l23.72 2.64q1.49 1.56 3 3L70 215.46a8 8 0 0 0 3.94 6 107.7 107.7 0 0 0 26.25 10.87 8 8 0 0 0 7.06-1.49L125.84 216q2.16.06 4.32 0l18.64 14.92a8 8 0 0 0 7.06 1.48 107.2 107.2 0 0 0 26.25-10.88 8 8 0 0 0 3.93-6l2.64-23.72q1.56-1.48 3-3l23.78-2.8a8 8 0 0 0 6-3.94 107.7 107.7 0 0 0 10.87-26.25 8 8 0 0 0-1.49-7.06Zm-16.1-6.5a74 74 0 0 1 0 8.68 8 8 0 0 0 1.74 5.48l14.19 17.73a91.6 91.6 0 0 1-6.23 15l-22.6 2.56a8 8 0 0 0-5.1 2.64 74 74 0 0 1-6.14 6.14 8 8 0 0 0-2.64 5.1l-2.51 22.58a91.3 91.3 0 0 1-15 6.23l-17.74-14.19a8 8 0 0 0-5-1.75h-.48a74 74 0 0 1-8.68 0 8 8 0 0 0-5.48 1.74l-17.78 14.2a91.6 91.6 0 0 1-15-6.23L82.89 187a8 8 0 0 0-2.64-5.1 74 74 0 0 1-6.14-6.14 8 8 0 0 0-5.1-2.64l-22.58-2.52a91.3 91.3 0 0 1-6.23-15l14.19-17.74a8 8 0 0 0 1.74-5.48 74 74 0 0 1 0-8.68 8 8 0 0 0-1.74-5.48L40.2 100.45a91.6 91.6 0 0 1 6.23-15L69 82.89a8 8 0 0 0 5.1-2.64 74 74 0 0 1 6.14-6.14A8 8 0 0 0 82.89 69l2.51-22.57a91.3 91.3 0 0 1 15-6.23l17.74 14.19a8 8 0 0 0 5.48 1.74 74 74 0 0 1 8.68 0 8 8 0 0 0 5.48-1.74l17.77-14.19a91.6 91.6 0 0 1 15 6.23L173.11 69a8 8 0 0 0 2.64 5.1 74 74 0 0 1 6.14 6.14 8 8 0 0 0 5.1 2.64l22.58 2.51a91.3 91.3 0 0 1 6.23 15l-14.19 17.74a8 8 0 0 0-1.74 5.53Z"
                  fill="white" />
              </svg>
            </div>
          </div>
        </div>

        <!-- chat messages container -->
        <div id="chatContainer">
          <div id="messageContainer"></div>
        </div>

        <!-- input container -->
        <div id="inputContainer">
          <textarea id="userInput" placeholder="Type a message..."></textarea>
          <button id="sendBtn">Send</button>
        </div>
      </div>

      <!--  tasks and log panels  -->
      <div class="tabs-container" id="jRight">
        <div class="resize-handle" id="jResizeHandle"></div>
        <div class="header" id="jHeader">
          <div class="left">
            <div class="tab-button active" data-tab="steps"><span id="progressText">STEPS</span></div>
            <div class="tab-button" data-tab="logs">LOGS</div>
          </div>
        </div>

        <div id="stepsTab" class="tab active pl-10">
          <div id="stepsList" class="steps-panel-view">
            <div class="text-inactive">This is where the steps for the solution will be displayed.</div>
          </div>
        </div>

        <div id="logsTab" class="tab">
          <div class="nested-tabs-container">
            <div class="nested-header" id="jHeader">
              <div class="tab-buttons-container" id="jTabsButtonsContainer">
                <div class="tab-buttons" id="jTabButtons">
                  <div class="log-tab-button active" data-tab="coder">CODER</div>
                  <div class="log-tab-button" data-tab="planner">PLANNER</div>
                  <div class="log-tab-button" data-tab="researcher">RESEARCHER</div>
                </div>
                <div id="jArrowSvg" class="arrow-svg toolbar-icon">
                  <svg width="13" height="10" viewBox="0 0 13 10" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M5.708 4.293a1 1 0 0 1 0 1.415l-4 4A1 1 0 1 1 .293 8.293l3.294-3.292L.293 1.708A1 1 0 0 1 1.708.293zm7 0a1 1 0 0 1 0 1.415l-4 4a1 1 0 0 1-1.415-1.415l3.294-3.292-3.294-3.293A1 1 0 1 1 8.708.293z"
                      fill="#979797" />
                  </svg>
                </div>
              </div>
            </div>

            <div id="plannerTab" class="log-tab">
              <div id="plannerLogs" class="panel-view">
                <div class="text-inactive">This is where the logs from the planner will be displayed.</div>
              </div>
            </div>

            <div id="coderTab" class="log-tab active">
              <div id="coderLogs" class="panel-view">
                <div class="text-inactive">This is where the logs from the coder will be displayed.</div>
              </div>
            </div>

            <div id="researcherTab" class="log-tab">
              <div id="researcherLogs" class="panel-view">
                <div class="text-inactive">This is where the logs from the researcher will be displayed.</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="plannerModal" class="modal">
      <div class="modal-body">
        <div class="modal-header">
          <div class="planner-modal-header">
            <span id="closePlanner">
              <svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M16.8249 10.3248L14.1487 13L16.8249 15.6752C16.9003 15.7506 16.9602 15.8403 17.0011 15.9389C17.0419 16.0375 17.063 16.1432 17.063 16.25C17.063 16.3568 17.0419 16.4625 17.0011 16.5611C16.9602 16.6597 16.9003 16.7494 16.8249 16.8248C16.7494 16.9003 16.6597 16.9602 16.5611 17.0011C16.4625 17.0419 16.3568 17.063 16.25 17.063C16.1432 17.063 16.0375 17.0419 15.9389 17.0011C15.8403 16.9602 15.7507 16.9003 15.6752 16.8248L13 14.1487L10.3248 16.8248C10.2494 16.9003 10.1597 16.9602 10.0611 17.0011C9.96248 17.0419 9.85676 17.063 9.75001 17.063C9.64325 17.063 9.53753 17.0419 9.4389 17.0011C9.34027 16.9602 9.25065 16.9003 9.17516 16.8248C9.09967 16.7494 9.03979 16.6597 8.99894 16.5611C8.95808 16.4625 8.93705 16.3568 8.93705 16.25C8.93705 16.1432 8.95808 16.0375 8.99894 15.9389C9.03979 15.8403 9.09967 15.7506 9.17516 15.6752L11.8513 13L9.17516 10.3248C9.0227 10.1724 8.93705 9.96561 8.93705 9.75C8.93705 9.53439 9.0227 9.32761 9.17516 9.17516C9.32762 9.0227 9.5344 8.93705 9.75001 8.93705C9.96561 8.93705 10.1724 9.0227 10.3248 9.17516L13 11.8513L15.6752 9.17516C15.7507 9.09967 15.8403 9.03979 15.9389 8.99893C16.0375 8.95808 16.1432 8.93705 16.25 8.93705C16.3568 8.93705 16.4625 8.95808 16.5611 8.99893C16.6597 9.03979 16.7494 9.09967 16.8249 9.17516C16.9003 9.25065 16.9602 9.34027 17.0011 9.4389C17.0419 9.53753 17.063 9.64324 17.063 9.75C17.063 9.85676 17.0419 9.96247 17.0011 10.0611C16.9602 10.1597 16.9003 10.2494 16.8249 10.3248ZM23.5625 13C23.5625 15.0891 22.943 17.1312 21.7824 18.8682C20.6218 20.6052 18.9721 21.959 17.0421 22.7585C15.1121 23.5579 12.9883 23.7671 10.9394 23.3595C8.89044 22.952 7.00838 21.946 5.53119 20.4688C4.054 18.9916 3.04802 17.1096 2.64046 15.0606C2.2329 13.0117 2.44208 10.888 3.24153 8.95791C4.04098 7.02786 5.3948 5.37822 7.13179 4.2176C8.86879 3.05698 10.9109 2.4375 13 2.4375C15.8004 2.44046 18.4853 3.55424 20.4656 5.53445C22.4458 7.51466 23.5595 10.1996 23.5625 13ZM21.9375 13C21.9375 11.2323 21.4133 9.50436 20.4313 8.03459C19.4492 6.56483 18.0534 5.41929 16.4202 4.74283C14.7871 4.06637 12.9901 3.88938 11.2564 4.23423C9.52268 4.57909 7.93017 5.4303 6.68024 6.68023C5.43031 7.93017 4.57909 9.52268 4.23424 11.2564C3.88938 12.9901 4.06637 14.7871 4.74283 16.4202C5.41929 18.0533 6.56483 19.4492 8.0346 20.4313C9.50436 21.4133 11.2323 21.9375 13 21.9375C15.3696 21.9348 17.6413 20.9923 19.3168 19.3168C20.9923 17.6413 21.9348 15.3695 21.9375 13Z"
                  fill="white" />
              </svg>
            </span>
            <div class="modal-heading">Planner</div>
            <div class="modal-subheading" id="progressTextInsideModal">2 of 5 tasks done</div>
          </div>
        </div>
        <div class="modal-content">
          <ul class="planner-modal-container" id="plannerStepsList"></ul>
        </div>
      </div>
    </div>

    <div id="settingsModal" class="modal">
      <div class="modal-body setting-modal-body">
        <div class="modal-header">
          <span id="closeSettings">
            <svg width="26" height="26" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M16.8249 10.3248L14.1487 13L16.8249 15.6752C16.9003 15.7506 16.9602 15.8403 17.0011 15.9389C17.0419 16.0375 17.063 16.1432 17.063 16.25C17.063 16.3568 17.0419 16.4625 17.0011 16.5611C16.9602 16.6597 16.9003 16.7494 16.8249 16.8248C16.7494 16.9003 16.6597 16.9602 16.5611 17.0011C16.4625 17.0419 16.3568 17.063 16.25 17.063C16.1432 17.063 16.0375 17.0419 15.9389 17.0011C15.8403 16.9602 15.7507 16.9003 15.6752 16.8248L13 14.1487L10.3248 16.8248C10.2494 16.9003 10.1597 16.9602 10.0611 17.0011C9.96248 17.0419 9.85676 17.063 9.75001 17.063C9.64325 17.063 9.53753 17.0419 9.4389 17.0011C9.34027 16.9602 9.25065 16.9003 9.17516 16.8248C9.09967 16.7494 9.03979 16.6597 8.99894 16.5611C8.95808 16.4625 8.93705 16.3568 8.93705 16.25C8.93705 16.1432 8.95808 16.0375 8.99894 15.9389C9.03979 15.8403 9.09967 15.7506 9.17516 15.6752L11.8513 13L9.17516 10.3248C9.0227 10.1724 8.93705 9.96561 8.93705 9.75C8.93705 9.53439 9.0227 9.32761 9.17516 9.17516C9.32762 9.0227 9.5344 8.93705 9.75001 8.93705C9.96561 8.93705 10.1724 9.0227 10.3248 9.17516L13 11.8513L15.6752 9.17516C15.7507 9.09967 15.8403 9.03979 15.9389 8.99893C16.0375 8.95808 16.1432 8.93705 16.25 8.93705C16.3568 8.93705 16.4625 8.95808 16.5611 8.99893C16.6597 9.03979 16.7494 9.09967 16.8249 9.17516C16.9003 9.25065 16.9602 9.34027 17.0011 9.4389C17.0419 9.53753 17.063 9.64324 17.063 9.75C17.063 9.85676 17.0419 9.96247 17.0011 10.0611C16.9602 10.1597 16.9003 10.2494 16.8249 10.3248ZM23.5625 13C23.5625 15.0891 22.943 17.1312 21.7824 18.8682C20.6218 20.6052 18.9721 21.959 17.0421 22.7585C15.1121 23.5579 12.9883 23.7671 10.9394 23.3595C8.89044 22.952 7.00838 21.946 5.53119 20.4688C4.054 18.9916 3.04802 17.1096 2.64046 15.0606C2.2329 13.0117 2.44208 10.888 3.24153 8.95791C4.04098 7.02786 5.3948 5.37822 7.13179 4.2176C8.86879 3.05698 10.9109 2.4375 13 2.4375C15.8004 2.44046 18.4853 3.55424 20.4656 5.53445C22.4458 7.51466 23.5595 10.1996 23.5625 13ZM21.9375 13C21.9375 11.2323 21.4133 9.50436 20.4313 8.03459C19.4492 6.56483 18.0534 5.41929 16.4202 4.74283C14.7871 4.06637 12.9901 3.88938 11.2564 4.23423C9.52268 4.57909 7.93017 5.4303 6.68024 6.68023C5.43031 7.93017 4.57909 9.52268 4.23424 11.2564C3.88938 12.9901 4.06637 14.7871 4.74283 16.4202C5.41929 18.0533 6.56483 19.4492 8.0346 20.4313C9.50436 21.4133 11.2323 21.9375 13 21.9375C15.3696 21.9348 17.6413 20.9923 19.3168 19.3168C20.9923 17.6413 21.9348 15.3695 21.9375 13Z"
                fill="white" />
            </svg>
          </span>
          <div class="settings-modal-heading">Environment Variables Configuration</div>
        </div>
        <div class="modal-content">
          <div class="settings-modal-container">
            <div class="input-wrapper">
              <label for="SIRJI_MODEL_PROVIDER">LLM Provider (openai or ollama)</label>
              <input type="text" id="SIRJI_MODEL_PROVIDER" value="openai" />
              <span class="error-message" id="SIRJI_MODEL_PROVIDER_ERROR"></span>
            </div>
            <div class="input-wrapper">
              <label for="SIRJI_MODEL">LLM Name (e.g. gpt-4-turbo, deepseek-coder:latest)</label>
              <input type="text" id="SIRJI_MODEL" value="gpt-4-turbo" />
              <span class="error-message" id="SIRJI_MODEL_ERROR"></span>
            </div>
            <div class="input-wrapper">
              <label for="SIRJI_OPENAI_API_KEY">OpenAI API Key</label>
              <input type="text" id="SIRJI_OPENAI_API_KEY" placeholder="Enter here" />
              <span class="error-message" id="SIRJI_OPENAI_API_KEY_ERROR"></span>
            </div>
            <div>
              <span class="error-message" id="save_settings_error"></span>
            </div>
          </div>
          <button class="save-settings-button" id="saveSettings">Save</button>
        </div>
      </div>
    </div>
  </main>
  <script type="module" nonce="${nonce}" src="${chatScriptUri}"></script>
</body>

</html>